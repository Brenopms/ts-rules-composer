<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ts-rules-composer - v0.0.1</title><meta name="description" content="Documentation for ts-rules-composer"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><link rel="stylesheet" href="assets/typedoc-github-style.css"/>
<style>
:root.mermaid-enabled .mermaid-block > pre {
  display: none;
}
:root:not(.mermaid-enabled) .mermaid-block > .mermaid {
  display: none !important;
}

.mermaid-block > .mermaid[data-inserted].dark {
  display: var(--mermaid-dark-display);
}
.mermaid-block > .mermaid[data-inserted].light {
  display: var(--mermaid-light-display);
}

:root {
  --mermaid-dark-display: none;
  --mermaid-light-display: block;
}
@media (prefers-color-scheme: light) {
  :root {
    --mermaid-dark-display: none;
    --mermaid-light-display: block;
  }
}
@media (prefers-color-scheme: dark) {
  :root {
    --mermaid-dark-display: block;
    --mermaid-light-display: none;
  }
}
body.light, :root[data-theme="light"] {
  --mermaid-dark-display: none;
  --mermaid-light-display: block;
}
body.dark, :root[data-theme="dark"] {
  --mermaid-dark-display: block;
  --mermaid-light-display: none;
}
</style>
</head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">ts-rules-composer - v0.0.1</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>ts-rules-composer - v0.0.1</h1></div><div class="tsd-panel tsd-typography"><h1 id="ts-rules-composer-üéº" class="tsd-anchor-link">TS Rules Composer üéº<a href="#ts-rules-composer-üéº" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://npmjs.com/package/ts-rules-composer"><img src="https://img.shields.io/npm/v/ts-rules-composer" alt="npm version"></a>
<a href="https://bundlephobia.com/package/ts-rules-composer"><img src="https://img.shields.io/bundlephobia/minzip/ts-rules-composer" alt="bundle size"></a>
<a href="LICENSE"><img src="https://img.shields.io/npm/l/ts-rules-composer" alt="license"></a></p>
<p>A <strong>dependency-free</strong>, type-safe validation engine for composing complex business rules with elegant pipelines.</p>
<pre><code class="typescript"><span class="hl-0">// Example: E-commerce checkout</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateCheckout</span><span class="hl-2"> = </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">validateCart</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-4">match</span><span class="hl-2">((</span><span class="hl-5">order</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">order</span><span class="hl-2">.</span><span class="hl-5">paymentMethod</span><span class="hl-2">, {</span><br/><span class="hl-2">    </span><span class="hl-6">&#39;credit_card&#39;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-5">validateCreditCard</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">&#39;paypal&#39;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-5">validatePaypal</span><br/><span class="hl-2">  }),</span><br/><span class="hl-2">  </span><span class="hl-4">withRetry</span><span class="hl-2">(</span><span class="hl-5">validateInventory</span><span class="hl-2">, { </span><span class="hl-5">attempts:</span><span class="hl-2"> </span><span class="hl-7">3</span><span class="hl-2"> })</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">result</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-4">validateCheckout</span><span class="hl-2">(</span><span class="hl-5">order</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="features-‚ú®" class="tsd-anchor-link">Features ‚ú®<a href="#features-‚ú®" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>üß© <strong>Composable</strong> - Build pipelines with 25+ combinators (<code>when</code>, <code>unless</code>, <code>mapError</code>, etc.)</li>
<li>üöÄ <strong>Zero Dependencies</strong> - Lightweight (under 2KB gzipped)</li>
<li>ü¶æ <strong>TypeScript First</strong> - Full inference for inputs, contexts, and errors</li>
<li>‚è± <strong>Async Ready</strong> - Mix sync/async rules seamlessly</li>
<li>üõ° <strong>Context-Aware</strong> - Shared validation state</li>
<li>üîå <strong>Extensible</strong> - Easily create custom combinators that integrate seamlessly</li>
<li>üìä <strong>Instrumentation</strong> - Debugging &amp; metrics out-of-the-box</li>
<li>üß™ <strong>Rigorously Tested</strong> - 95+% test coverage with 300+ test cases covering all edge cases</li>
<li>üåê <strong>Node.js + Browser Compatible</strong> ‚Äì Works in modern browsers and most Node.js versions (14+)</li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-4">npm</span><span class="hl-2"> </span><span class="hl-6">install</span><span class="hl-2"> </span><span class="hl-6">ts-rules-composer</span><br/><span class="hl-0"># or</span><br/><span class="hl-4">yarn</span><span class="hl-2"> </span><span class="hl-6">add</span><span class="hl-2"> </span><span class="hl-6">ts-rules-composer</span><br/><span class="hl-0"># or</span><br/><span class="hl-4">pnpm</span><span class="hl-2"> </span><span class="hl-6">add</span><span class="hl-2"> </span><span class="hl-6">ts-rules-composer</span>
</code><button type="button">Copy</button></pre>

<h2 id="core-concepts" class="tsd-anchor-link">Core Concepts<a href="#core-concepts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="‚öõÔ∏è-the-atomic-validation-unit" class="tsd-anchor-link">‚öõÔ∏è The Atomic Validation Unit<a href="#‚öõÔ∏è-the-atomic-validation-unit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>At the heart of <code>ts-rules-composer</code> lies the <strong>Rule</strong> ‚Äî a function that performs a single validation step.</p>
<p>Rules are:</p>
<ul>
<li><strong>Minimal</strong>: they validate one thing only.</li>
<li><strong>Composable</strong>: they can be combined using higher-order combinators.</li>
<li><strong>Pure</strong> (ideally): they take an input and return a result, without mutating external state.</li>
<li><strong>Async-compatible</strong>: all rules can be sync or async, and combinators handle both transparently.</li>
<li><strong>Context-aware</strong>: optional <code>context</code> can be passed to any rule for dependency injection, configuration, or shared state.</li>
</ul>
<h4 id="üß©-rule-signature" class="tsd-anchor-link">üß© Rule Signature<a href="#üß©-rule-signature" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-1">type</span><span class="hl-2"> </span><span class="hl-9">Rule</span><span class="hl-2">&lt;</span><span class="hl-9">TInput</span><span class="hl-2">, </span><span class="hl-9">TError</span><span class="hl-2"> = </span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-9">TContext</span><span class="hl-2"> = </span><span class="hl-9">unknown</span><span class="hl-2">&gt; =</span><br/><span class="hl-2">  (</span><span class="hl-5">input</span><span class="hl-2">: </span><span class="hl-9">TInput</span><span class="hl-2">, </span><span class="hl-5">context</span><span class="hl-2">?: </span><span class="hl-9">TContext</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-9">Promise</span><span class="hl-2">&lt;</span><span class="hl-9">RuleResult</span><span class="hl-2">&lt;</span><span class="hl-9">TError</span><span class="hl-2">&gt;&gt; | </span><span class="hl-9">RuleResult</span><span class="hl-2">&lt;</span><span class="hl-9">TError</span><span class="hl-2">&gt;;</span>
</code><button type="button">Copy</button></pre>

<ul>
<li><code>TInput</code> ‚Äì the type of input the rule receives</li>
<li><code>TError</code> ‚Äì the type of error returned on failure (defaults to <code>string</code>)</li>
<li><code>TContext</code> ‚Äì optional shared context object passed to the rule</li>
<li><code>Result</code> ‚Äì your rule can return synchronously or asynchronously</li>
</ul>
<h4 id="üß™-rule-result" class="tsd-anchor-link">üß™ Rule Result<a href="#üß™-rule-result" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Rules must return one of two outcomes:</p>
<pre><code class="ts"><span class="hl-1">type</span><span class="hl-2"> </span><span class="hl-9">RuleResult</span><span class="hl-2">&lt;</span><span class="hl-9">TError</span><span class="hl-2"> = </span><span class="hl-9">string</span><span class="hl-2">&gt; =</span><br/><span class="hl-2">  | { </span><span class="hl-5">status</span><span class="hl-2">: </span><span class="hl-6">&quot;passed&quot;</span><span class="hl-2"> }</span><br/><span class="hl-2">  | { </span><span class="hl-5">status</span><span class="hl-2">: </span><span class="hl-6">&quot;failed&quot;</span><span class="hl-2">; </span><span class="hl-5">error</span><span class="hl-2">: </span><span class="hl-9">TError</span><span class="hl-2"> | </span><span class="hl-9">TError</span><span class="hl-2">[] };</span>
</code><button type="button">Copy</button></pre>

<p>Use the utility functions <code>pass()</code> and <code>fail(error)</code> to return results:</p>
<pre><code class="ts"><span class="hl-8">import</span><span class="hl-2"> { </span><span class="hl-5">pass</span><span class="hl-2">, </span><span class="hl-5">fail</span><span class="hl-2"> } </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-6">&#39;ts-rules-composer&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-4">isEven</span><span class="hl-2"> = (</span><span class="hl-5">n</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><br/><span class="hl-2">  </span><span class="hl-5">n</span><span class="hl-2"> % </span><span class="hl-7">2</span><span class="hl-2"> === </span><span class="hl-7">0</span><span class="hl-2"> ? </span><span class="hl-4">pass</span><span class="hl-2">() : </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;Must be even&quot;</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<h4 id="üß†-context-example" class="tsd-anchor-link">üß† Context Example<a href="#üß†-context-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Context is optional but powerful. It lets rules access external services, user configuration, or metadata.</p>
<pre><code class="ts"><span class="hl-1">type</span><span class="hl-2"> </span><span class="hl-9">Ctx</span><span class="hl-2"> = { </span><span class="hl-5">threshold</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2"> };</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-4">isAboveThreshold</span><span class="hl-2"> = (</span><span class="hl-5">n</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2">, </span><span class="hl-5">ctx</span><span class="hl-2">?: </span><span class="hl-9">Ctx</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><br/><span class="hl-2">  </span><span class="hl-5">n</span><span class="hl-2"> &gt; (</span><span class="hl-5">ctx</span><span class="hl-2">?.</span><span class="hl-5">threshold</span><span class="hl-2"> ?? </span><span class="hl-7">0</span><span class="hl-2">) ? </span><span class="hl-4">pass</span><span class="hl-2">() : </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;Below threshold&quot;</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<p>When composing rules, context will be passed automatically to all child rules.</p>
<h4 id="üîó-composing-rules" class="tsd-anchor-link">üîó Composing Rules<a href="#üîó-composing-rules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Rules are designed to be combined using <strong>combinators</strong> like <code>pipeRules</code>, <code>every</code>, <code>oneOf</code>, <code>when</code>, and <code>match</code>.</p>
<pre><code class="ts"><span class="hl-8">import</span><span class="hl-2"> { </span><span class="hl-5">pipeRules</span><span class="hl-2"> } </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-6">&#39;ts-rules-composer&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validate</span><span class="hl-2"> = </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">isEven</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">isAboveThreshold</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">result</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-4">validate</span><span class="hl-2">(</span><span class="hl-7">4</span><span class="hl-2">, { </span><span class="hl-5">threshold:</span><span class="hl-2"> </span><span class="hl-7">2</span><span class="hl-2"> });</span><br/><span class="hl-0">// ‚Üí { status: &quot;passed&quot; }</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">result2</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-4">validate</span><span class="hl-2">(</span><span class="hl-7">3</span><span class="hl-2">, { </span><span class="hl-5">threshold:</span><span class="hl-2"> </span><span class="hl-7">2</span><span class="hl-2"> });</span><br/><span class="hl-0">// ‚Üí { status: &quot;failed&quot;, error: &quot;Must be even&quot; }</span>
</code><button type="button">Copy</button></pre>

<hr>
<h4 id="üß∞-summary" class="tsd-anchor-link">üß∞ Summary<a href="#üß∞-summary" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sync &amp; Async</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>Error Aggregation</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>Context Injection</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>Type Inference</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>Composition</td>
<td>‚úÖ</td>
</tr>
</tbody>
</table>
<p>Each rule is a <strong>unit of validation</strong> that plugs into powerful composition pipelines. You write simple rules and then combine them into expressive, testable flows using composable logic.</p>
<h2 id="usage-examples" class="tsd-anchor-link">Usage Examples<a href="#usage-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Complete examples can be found here:</p>
<ul>
<li>üßë‚Äçüíª <a href="media/user-registration.example.ts">User Registration</a></li>
<li>üí≥ <a href="media/financial-transaction.example.ts">Financial Transaction Validation</a></li>
<li>üöÄ <a href="media/model-deployment.example.ts">Model Deployment Validator</a></li>
</ul>
<h3 id="example-1-financial-transaction-validation" class="tsd-anchor-link">Example 1: Financial Transaction Validation<a href="#example-1-financial-transaction-validation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-8">import</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">pipeRules</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">match</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">withRetry</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">withMemoize</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">withTimeout</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">when</span><br/><span class="hl-2">} </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-6">&#39;ts-rules-composer&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// 1. Basic validators</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-4">validateAmount</span><span class="hl-2"> = (</span><span class="hl-5">tx</span><span class="hl-2">: </span><span class="hl-9">Transaction</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><br/><span class="hl-2">  </span><span class="hl-5">tx</span><span class="hl-2">.</span><span class="hl-5">amount</span><span class="hl-2"> &gt; </span><span class="hl-7">0</span><span class="hl-2"> ? </span><span class="hl-4">pass</span><span class="hl-2">() : </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;Amount must be positive&quot;</span><span class="hl-2">);</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-4">validateCurrency</span><span class="hl-2"> = (</span><span class="hl-5">tx</span><span class="hl-2">: </span><span class="hl-9">Transaction</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><br/><span class="hl-2">  </span><span class="hl-3">SUPPORTED_CURRENCIES</span><span class="hl-2">.</span><span class="hl-4">includes</span><span class="hl-2">(</span><span class="hl-5">tx</span><span class="hl-2">.</span><span class="hl-5">currency</span><span class="hl-2">)</span><br/><span class="hl-2">    ? </span><span class="hl-4">pass</span><span class="hl-2">()</span><br/><span class="hl-2">    : </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">`Unsupported currency: </span><span class="hl-1">${</span><span class="hl-5">tx</span><span class="hl-10">.</span><span class="hl-5">currency</span><span class="hl-1">}</span><span class="hl-6">`</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// 2. Memoized fraud check (cached for 5 minutes)</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">checkFraudRisk</span><span class="hl-2"> = </span><span class="hl-4">withMemoize</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-1">async</span><span class="hl-2"> (</span><span class="hl-5">tx</span><span class="hl-2">: </span><span class="hl-9">Transaction</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">risk</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-5">fraudService</span><span class="hl-2">.</span><span class="hl-4">assess</span><span class="hl-2">(</span><span class="hl-5">tx</span><span class="hl-2">);</span><br/><span class="hl-2">    </span><span class="hl-8">return</span><span class="hl-2"> </span><span class="hl-5">risk</span><span class="hl-2">.</span><span class="hl-5">score</span><span class="hl-2"> &lt; </span><span class="hl-7">5</span><span class="hl-2"> ? </span><span class="hl-4">pass</span><span class="hl-2">() : </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;High fraud risk&quot;</span><span class="hl-2">);</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  </span><span class="hl-5">tx</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-6">`</span><span class="hl-1">${</span><span class="hl-5">tx</span><span class="hl-10">.</span><span class="hl-5">userId</span><span class="hl-1">}</span><span class="hl-6">-</span><span class="hl-1">${</span><span class="hl-5">tx</span><span class="hl-10">.</span><span class="hl-5">amount</span><span class="hl-1">}</span><span class="hl-6">-</span><span class="hl-1">${</span><span class="hl-5">tx</span><span class="hl-10">.</span><span class="hl-5">recipient</span><span class="hl-1">}</span><span class="hl-6">`</span><span class="hl-2">,</span><br/><span class="hl-2">  { </span><span class="hl-5">ttl:</span><span class="hl-2"> </span><span class="hl-7">300000</span><span class="hl-2"> }</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// 3. Payment method handling</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validatePaymentMethod</span><span class="hl-2"> = </span><span class="hl-4">match</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">tx</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">tx</span><span class="hl-2">.</span><span class="hl-5">paymentType</span><span class="hl-2">,</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-6">&quot;credit_card&quot;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">      </span><span class="hl-5">validateCardNumber</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-5">validateExpiry</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-4">withTimeout</span><span class="hl-2">(</span><span class="hl-5">bankAuthCheck</span><span class="hl-2">, </span><span class="hl-7">3000</span><span class="hl-2">, </span><span class="hl-6">&quot;Bank auth timeout&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">    ]),</span><br/><span class="hl-2">    </span><span class="hl-6">&quot;crypto&quot;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-5">validateWalletAddress</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">&quot;bank_transfer&quot;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-5">validateIBAN</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// 4. Complete pipeline</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateTransaction</span><span class="hl-2"> = </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">validateAmount</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateCurrency</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Only run fraud check for transactions &gt; $1000</span><br/><span class="hl-2">  </span><span class="hl-4">when</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-5">tx</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">tx</span><span class="hl-2">.</span><span class="hl-5">amount</span><span class="hl-2"> &gt; </span><span class="hl-7">1000</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-4">withRetry</span><span class="hl-2">(</span><span class="hl-5">checkFraudRisk</span><span class="hl-2">, { </span><span class="hl-5">attempts:</span><span class="hl-2"> </span><span class="hl-7">2</span><span class="hl-2"> })</span><br/><span class="hl-2">  ),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-5">validatePaymentMethod</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Compliance check (different for business/personal)</span><br/><span class="hl-2">  </span><span class="hl-4">match</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-5">tx</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">tx</span><span class="hl-2">.</span><span class="hl-5">accountType</span><span class="hl-2">,</span><br/><span class="hl-2">    {</span><br/><span class="hl-2">      </span><span class="hl-6">&quot;business&quot;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-5">validateBusinessTransfer</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-6">&quot;personal&quot;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-5">validatePersonalTransfer</span><br/><span class="hl-2">    }</span><br/><span class="hl-2">  )</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-0">// Usage</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">result</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-4">validateTransaction</span><span class="hl-2">(</span><span class="hl-5">paymentRequest</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-2-user-registration" class="tsd-anchor-link">Example 2: User Registration<a href="#example-2-user-registration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-8">import</span><span class="hl-2"> { </span><span class="hl-5">pipeRules</span><span class="hl-2">, </span><span class="hl-5">every</span><span class="hl-2">, </span><span class="hl-5">match</span><span class="hl-2"> } </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-6">&#39;ts-rules-composer&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateUser</span><span class="hl-2"> = </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-0">// Sequential validation</span><br/><span class="hl-2">  </span><span class="hl-5">validateUsernameFormat</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-4">withMemoize</span><span class="hl-2">(</span><span class="hl-5">checkUsernameAvailability</span><span class="hl-2">, { </span><span class="hl-5">ttl:</span><span class="hl-2"> </span><span class="hl-7">60000</span><span class="hl-2"> }),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Parallel validation</span><br/><span class="hl-2">  </span><span class="hl-4">every</span><span class="hl-2">([</span><br/><span class="hl-2">    </span><span class="hl-5">validatePasswordStrength</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-5">validateEmailFormat</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-5">checkEmailUnique</span><br/><span class="hl-2">  ]),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// pattern matching routing</span><br/><span class="hl-2">  </span><span class="hl-4">match</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-5">user</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">user</span><span class="hl-2">.</span><span class="hl-5">role</span><span class="hl-2">,</span><br/><span class="hl-2">    {</span><br/><span class="hl-2">      </span><span class="hl-6">&#39;admin&#39;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-5">validateAdminPrivileges</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-6">&#39;user&#39;</span><span class="hl-5">:</span><span class="hl-2"> </span><span class="hl-5">validateStandardUser</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&#39;Unknown role&#39;</span><span class="hl-2">)</span><br/><span class="hl-2">  )</span><br/><span class="hl-2">]);</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-3-healthcare-appointment-system" class="tsd-anchor-link">Example 3: Healthcare Appointment System<a href="#example-3-healthcare-appointment-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">bookAppointment</span><span class="hl-2"> = </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-0">// Context-aware validation</span><br/><span class="hl-2">  </span><span class="hl-4">requireContextRule</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-6">&quot;Missing schedule data&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    (</span><span class="hl-5">appt</span><span class="hl-2">, </span><span class="hl-5">ctx</span><span class="hl-2">: </span><span class="hl-9">ScheduleContext</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-4">validateDoctorAvailability</span><span class="hl-2">(</span><span class="hl-5">appt</span><span class="hl-2">, </span><span class="hl-5">ctx</span><span class="hl-2">)</span><br/><span class="hl-2">  ),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Error transformation</span><br/><span class="hl-2">  </span><span class="hl-4">mapError</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-5">validateInsurance</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-5">error</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-6">`Insurance error: </span><span class="hl-1">${</span><span class="hl-5">error</span><span class="hl-10">.</span><span class="hl-5">code</span><span class="hl-1">}</span><span class="hl-6">`</span><br/><span class="hl-2">  ),</span><br/><span class="hl-2">  </span><br/><span class="hl-2">  </span><span class="hl-0">// Time-sensitive check</span><br/><span class="hl-2">  </span><span class="hl-4">withTimeout</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-5">checkFacilityCapacity</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">5000</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">&quot;System timeout&quot;</span><br/><span class="hl-2">  )</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-0">// Usage</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">result</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-4">bookAppointment</span><span class="hl-2">(</span><span class="hl-5">newAppointment</span><span class="hl-2">, </span><span class="hl-5">clinicSchedule</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-4-content-moderation-system" class="tsd-anchor-link">Example 4: Content Moderation System<a href="#example-4-content-moderation-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-8">import</span><span class="hl-2"> { </span><br/><span class="hl-2">  </span><span class="hl-5">pipeRules</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateField</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">requireContextRule</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">inject</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">tap</span><br/><span class="hl-2">} </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-6">&#39;ts-rules-composer&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// 1. Strongly typed context</span><br/><span class="hl-1">type</span><span class="hl-2"> </span><span class="hl-9">ModerationContext</span><span class="hl-2"> = {</span><br/><span class="hl-2">  </span><span class="hl-5">moderatorId</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-5">permissions</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">[];</span><br/><span class="hl-2">  </span><span class="hl-5">environment</span><span class="hl-2">: </span><span class="hl-6">&#39;staging&#39;</span><span class="hl-2"> | </span><span class="hl-6">&#39;production&#39;</span><span class="hl-2">;</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-0">// 2. Rule factory with dependency injection</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-4">createModerationRules</span><span class="hl-2"> = (</span><span class="hl-5">logger</span><span class="hl-2">: </span><span class="hl-9">LoggerService</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><br/><span class="hl-2">  </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">    </span><span class="hl-0">// Enforce context requirements</span><br/><span class="hl-2">    </span><span class="hl-4">requireContextRule</span><span class="hl-2">(</span><br/><span class="hl-2">      </span><span class="hl-6">&quot;Moderator context required&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      (</span><span class="hl-5">post</span><span class="hl-2">, </span><span class="hl-5">ctx</span><span class="hl-2">: </span><span class="hl-9">ModerationContext</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">        </span><br/><span class="hl-2">        </span><span class="hl-0">// Core validations</span><br/><span class="hl-2">        </span><span class="hl-4">validateField</span><span class="hl-2">(</span><span class="hl-5">post</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">post</span><span class="hl-2">.</span><span class="hl-5">content</span><span class="hl-2">, </span><span class="hl-5">content</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><br/><span class="hl-2">          </span><span class="hl-5">content</span><span class="hl-2">.</span><span class="hl-5">length</span><span class="hl-2"> &gt; </span><span class="hl-7">0</span><span class="hl-2"> || </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;Empty content&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">        ),</span><br/><span class="hl-2">        </span><br/><span class="hl-2">        </span><span class="hl-0">// Environment-specific rule</span><br/><span class="hl-2">        </span><span class="hl-4">when</span><span class="hl-2">(</span><br/><span class="hl-2">          (</span><span class="hl-5">_</span><span class="hl-2">, </span><span class="hl-5">ctx</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">ctx</span><span class="hl-2">.</span><span class="hl-5">environment</span><span class="hl-2"> === </span><span class="hl-6">&#39;production&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">          </span><span class="hl-4">validateField</span><span class="hl-2">(</span><span class="hl-5">post</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">post</span><span class="hl-2">.</span><span class="hl-5">tags</span><span class="hl-2">, </span><span class="hl-5">tags</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><br/><span class="hl-2">            </span><span class="hl-5">tags</span><span class="hl-2">.</span><span class="hl-5">length</span><span class="hl-2"> &lt;= </span><span class="hl-7">5</span><span class="hl-2"> || </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;Too many tags&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">          )</span><br/><span class="hl-2">        ),</span><br/><br/><span class="hl-2">        </span><span class="hl-0">// Permission-based rule</span><br/><span class="hl-2">        </span><span class="hl-4">when</span><span class="hl-2">(</span><br/><span class="hl-2">          (</span><span class="hl-5">_</span><span class="hl-2">, </span><span class="hl-5">ctx</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">ctx</span><span class="hl-2">.</span><span class="hl-5">permissions</span><span class="hl-2">.</span><span class="hl-4">includes</span><span class="hl-2">(</span><span class="hl-6">&#39;FLAG_SENSITIVE&#39;</span><span class="hl-2">),</span><br/><span class="hl-2">          </span><span class="hl-4">validateField</span><span class="hl-2">(</span><span class="hl-5">post</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">post</span><span class="hl-2">.</span><span class="hl-5">content</span><span class="hl-2">, </span><span class="hl-5">checkSensitiveContent</span><span class="hl-2">)</span><br/><span class="hl-2">        ),</span><br/><br/><span class="hl-2">        </span><span class="hl-0">// Logging side effect</span><br/><span class="hl-2">        </span><span class="hl-4">tap</span><span class="hl-2">((</span><span class="hl-5">post</span><span class="hl-2">, </span><span class="hl-5">ctx</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-5">logger</span><span class="hl-2">.</span><span class="hl-4">log</span><span class="hl-2">({</span><br/><span class="hl-2">            </span><span class="hl-5">action:</span><span class="hl-2"> </span><span class="hl-6">&#39;moderate&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-5">moderator:</span><span class="hl-2"> </span><span class="hl-5">ctx</span><span class="hl-2">.</span><span class="hl-5">moderatorId</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-5">postId:</span><span class="hl-2"> </span><span class="hl-5">post</span><span class="hl-2">.</span><span class="hl-5">id</span><br/><span class="hl-2">          });</span><br/><span class="hl-2">        })</span><br/><span class="hl-2">      ])</span><br/><span class="hl-2">    )</span><br/><span class="hl-2">  ]);</span><br/><br/><span class="hl-0">// 3. Inject dependencies</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">moderatePost</span><span class="hl-2"> = </span><span class="hl-4">inject</span><span class="hl-2">(</span><br/><span class="hl-2">  { </span><span class="hl-5">logger:</span><span class="hl-2"> </span><span class="hl-1">new</span><span class="hl-2"> </span><span class="hl-4">Logger</span><span class="hl-2">() },</span><br/><span class="hl-2">  </span><span class="hl-5">createModerationRules</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// 4. Usage</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">postModerationResult</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-4">moderatePost</span><span class="hl-2">(</span><br/><span class="hl-2">  { </span><span class="hl-5">id:</span><span class="hl-2"> </span><span class="hl-6">&quot;post123&quot;</span><span class="hl-2">, </span><span class="hl-5">content:</span><span class="hl-2"> </span><span class="hl-6">&quot;Hello&quot;</span><span class="hl-2">, </span><span class="hl-5">tags:</span><span class="hl-2"> [</span><span class="hl-6">&quot;a&quot;</span><span class="hl-2">] },</span><br/><span class="hl-2">  { </span><br/><span class="hl-2">    </span><span class="hl-5">moderatorId:</span><span class="hl-2"> </span><span class="hl-6">&quot;user456&quot;</span><span class="hl-2">, </span><br/><span class="hl-2">    </span><span class="hl-5">permissions:</span><span class="hl-2"> [</span><span class="hl-6">&quot;FLAG_SENSITIVE&quot;</span><span class="hl-2">],</span><br/><span class="hl-2">    </span><span class="hl-5">environment:</span><span class="hl-2"> </span><span class="hl-6">&quot;production&quot;</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="error-handling-standardization" class="tsd-anchor-link">Error Handling Standardization<a href="#error-handling-standardization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This library provides consistent error handling across all validation operations through a standardized system:</p>
<h3 id="core-principles" class="tsd-anchor-link">Core Principles<a href="#core-principles" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>No Uncaught Exceptions</strong> - All errors are converted to <code>RuleResult</code> objects</li>
<li><strong>Type Safety</strong> - Custom error types are preserved throughout operations</li>
<li><strong>Flexible Control</strong> - Choose between safety and performance with error handling modes</li>
</ol>
<h3 id="standardization-functions" class="tsd-anchor-link">Standardization Functions<a href="#standardization-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>withSafeError</code></td>
<td>Wraps rules to catch exceptions and convert to failed validation results</td>
</tr>
<tr>
<td><code>withSafePredicate</code></td>
<td>Safely handles predicate functions that may throw</td>
</tr>
<tr>
<td><code>getNormalizedRule</code></td>
<td>Applies consistent error handling to single rules</td>
</tr>
<tr>
<td><code>getNormalizedRules</code></td>
<td>Batch processes multiple rules with standardized error handling</td>
</tr>
</tbody>
</table>
<h3 id="error-handling-modes" class="tsd-anchor-link">Error Handling Modes<a href="#error-handling-modes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Configure via <code>RuleSafetyOptions</code>:</p>
<pre><code class="typescript"><span class="hl-2">{</span><br/><span class="hl-2">  </span><span class="hl-5">errorHandlingMode</span><span class="hl-2">?: </span><span class="hl-6">&#39;safe&#39;</span><span class="hl-2"> | </span><span class="hl-6">&#39;unsafe&#39;</span><span class="hl-2">,  </span><span class="hl-0">// Default: &#39;safe&#39;</span><br/><span class="hl-2">  </span><span class="hl-5">errorTransform</span><span class="hl-2">?: (</span><span class="hl-5">error</span><span class="hl-2">: </span><span class="hl-9">unknown</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">TError</span><span class="hl-2"> </span><span class="hl-0">// Custom error conversion</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Modes</strong>:</p>
<ul>
<li><code>safe</code>: (Default) All errors are caught and converted to validation failures</li>
<li><code>unsafe</code>: Lets exceptions propagate (for performance-critical paths)</li>
</ul>
<h3 id="error-flow" class="tsd-anchor-link">Error Flow<a href="#error-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="mermaid-block"><div class="mermaid dark">%%{init:{"theme":"dark"}}%%
graph TD
    A[Raw Error] --&gt;|Thrown| B{Handling Mode?}
    B --&gt;|safe| C[Convert to RuleResult]
    B --&gt;|unsafe| D[Propagate Exception]
    C --&gt; E[Apply errorTransform if provided]
    E --&gt; F[Return Failed Result]</div><div class="mermaid light">%%{init:{"theme":"default"}}%%
graph TD
    A[Raw Error] --&gt;|Thrown| B{Handling Mode?}
    B --&gt;|safe| C[Convert to RuleResult]
    B --&gt;|unsafe| D[Propagate Exception]
    C --&gt; E[Apply errorTransform if provided]
    E --&gt; F[Return Failed Result]</div><pre><code class="language-mermaid">graph TD
    A[Raw Error] --&gt;|Thrown| B{Handling Mode?}
    B --&gt;|safe| C[Convert to RuleResult]
    B --&gt;|unsafe| D[Propagate Exception]
    C --&gt; E[Apply errorTransform if provided]
    E --&gt; F[Return Failed Result]</code></pre></div>
<h3 id="best-practices" class="tsd-anchor-link">Best Practices<a href="#best-practices" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li>
<p><strong>For validation logic</strong>:</p>
<pre><code class="typescript"><span class="hl-0">// Safe mode with custom error transformation</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">rule</span><span class="hl-2"> = </span><span class="hl-4">getNormalizedRule</span><span class="hl-2">(</span><span class="hl-5">myRule</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-4">errorTransform</span><span class="hl-5">:</span><span class="hl-2"> (</span><span class="hl-5">e</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> ({ </span><span class="hl-5">code:</span><span class="hl-2"> </span><span class="hl-7">500</span><span class="hl-2">, </span><span class="hl-5">message:</span><span class="hl-2"> </span><span class="hl-4">String</span><span class="hl-2">(</span><span class="hl-5">e</span><span class="hl-2">) })</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>For performance-critical paths</strong>:</p>
<pre><code class="typescript"><span class="hl-0">// Unsafe mode - ensure calling code handles exceptions</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">fastRule</span><span class="hl-2"> = </span><span class="hl-4">getNormalizedRule</span><span class="hl-2">(</span><span class="hl-5">highPerfRule</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-5">errorHandlingMode:</span><span class="hl-2"> </span><span class="hl-6">&#39;unsafe&#39;</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Custom error types</strong>:</p>
<pre><code class="typescript"><span class="hl-1">type</span><span class="hl-2"> </span><span class="hl-9">APIError</span><span class="hl-2"> = { </span><span class="hl-5">status</span><span class="hl-2">: </span><span class="hl-9">number</span><span class="hl-2"> };</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">apiRule</span><span class="hl-2">: </span><span class="hl-9">Rule</span><span class="hl-2">&lt;</span><span class="hl-9">string</span><span class="hl-2">, </span><span class="hl-9">APIError</span><span class="hl-2">&gt; = </span><span class="hl-0">/*...*/</span><span class="hl-2">;</span><br/><span class="hl-0">// Preserves APIError type through all transformations</span>
</code><button type="button">Copy</button></pre>

</li>
</ol>
<h3 id="debugging-tips" class="tsd-anchor-link">Debugging Tips<a href="#debugging-tips" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Enable debug mode to get enhanced error information:</p>
<pre><code class="typescript"><span class="hl-8">import</span><span class="hl-2"> { </span><span class="hl-5">withDebug</span><span class="hl-2"> } </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-6">&#39;./combinators&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">debugRule</span><span class="hl-2"> = </span><span class="hl-4">withDebug</span><span class="hl-2">(</span><span class="hl-5">myRule</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-4">onError</span><span class="hl-5">:</span><span class="hl-2"> (</span><span class="hl-5">error</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-4">error</span><span class="hl-2">(</span><span class="hl-6">&#39;Rule failed:&#39;</span><span class="hl-2">, </span><span class="hl-5">error</span><span class="hl-2">)</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="error-handling-precedence-rules" class="tsd-anchor-link">Error Handling Precedence Rules<a href="#error-handling-precedence-rules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Key Principle</strong>: Composition configuration always overrides individual rule settings. This ensures consistent behavior within each composition block.</p>
<div class="mermaid-block"><div class="mermaid dark">%%{init:{"theme":"dark"}}%%
graph TD
    A[Composition Config] --&gt;|Overrides| B[Individual Rule Config]
    style A stroke:#28cc9e,stroke-width:2px
    style B stroke:#ff9f43</div><div class="mermaid light">%%{init:{"theme":"default"}}%%
graph TD
    A[Composition Config] --&gt;|Overrides| B[Individual Rule Config]
    style A stroke:#28cc9e,stroke-width:2px
    style B stroke:#ff9f43</div><pre><code class="language-mermaid">graph TD
    A[Composition Config] --&gt;|Overrides| B[Individual Rule Config]
    style A stroke:#28cc9e,stroke-width:2px
    style B stroke:#ff9f43</code></pre></div>
<h4 id="hierarchy-of-control" class="tsd-anchor-link">Hierarchy of Control<a href="#hierarchy-of-control" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ol>
<li><strong>Composition-Level Setting</strong> (Highest priority)
<ul>
<li><code>pipeRules/composeRules/every/oneOf</code> configurations</li>
</ul>
</li>
<li><strong>Rule-Level Configuration</strong> (Only applies if composition allows)
<ul>
<li><code>withSafeError</code> or <code>getNormalizedRule</code> settings</li>
</ul>
</li>
<li><strong>Global Default</strong> (<code>safe</code> mode)</li>
</ol>
<h4 id="behavior-matrix" class="tsd-anchor-link">Behavior Matrix<a href="#behavior-matrix" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><table>
<thead>
<tr>
<th>Composition Mode</th>
<th>Rule Mode</th>
<th>Effective Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>safe</code></td>
<td>Any</td>
<td>All rules run in safe mode</td>
</tr>
<tr>
<td><code>unsafe</code></td>
<td>Not specified</td>
<td>Rule's native behavior</td>
</tr>
<tr>
<td><code>unsafe</code></td>
<td><code>safe</code></td>
<td>Rule runs in safe mode</td>
</tr>
<tr>
<td><code>unsafe</code></td>
<td><code>unsafe</code></td>
<td>Rule runs in unsafe mode</td>
</tr>
</tbody>
</table>
<h4 id="complete-error-flow" class="tsd-anchor-link">Complete Error Flow<a href="#complete-error-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><div class="mermaid-block"><div class="mermaid dark">%%{init:{"theme":"dark"}}%%
graph TD
    A[Raw Error] --&gt; B{Composition&lt;br&gt;Configuration?}
    B --&gt;|safe| C[Force Safe Handling]
    B --&gt;|unsafe| D{Individual Rule&lt;br&gt;Configuration?}
    D --&gt;|safe or not specified| C[Propagate Exception]
    D --&gt;|unsafe| E
    C --&gt; F[Apply errorTransform]
    F --&gt; G[Return Failed Result]
    E --&gt; H[Propagate Raw Exception]
<pre><code>style B stroke:#28cc9e,stroke-width:2px
style D stroke:#ff9f43
classDef green fill:#e6f7e6,stroke:#28cc9e
classDef yellow fill:#fff8e6,stroke:#ff9f43
class B,D green,yellow&lt;/div&gt;&lt;div class=&quot;mermaid light&quot;&gt;%%{init:{&quot;theme&quot;:&quot;default&quot;}}%%
</code></pre>
<p>graph TD
A[Raw Error] --&gt; B{Composition&lt;br&gt;Configuration?}
B --&gt;|safe| C[Force Safe Handling]
B --&gt;|unsafe| D{Individual Rule&lt;br&gt;Configuration?}
D --&gt;|safe or not specified| C[Propagate Exception]
D --&gt;|unsafe| E
C --&gt; F[Apply errorTransform]
F --&gt; G[Return Failed Result]
E --&gt; H[Propagate Raw Exception]</p>
<pre><code>style B stroke:#28cc9e,stroke-width:2px
style D stroke:#ff9f43
classDef green fill:#e6f7e6,stroke:#28cc9e
classDef yellow fill:#fff8e6,stroke:#ff9f43
class B,D green,yellow&lt;/div&gt;&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;graph TD
A[Raw Error] --&amp;gt; B{Composition&amp;lt;br&amp;gt;Configuration?}
B --&amp;gt;|safe| C[Force Safe Handling]
B --&amp;gt;|unsafe| D{Individual Rule&amp;lt;br&amp;gt;Configuration?}
D --&amp;gt;|safe or not specified| C[Propagate Exception]
D --&amp;gt;|unsafe| E
C --&amp;gt; F[Apply errorTransform]
F --&amp;gt; G[Return Failed Result]
E --&amp;gt; H[Propagate Raw Exception]

style B stroke:#28cc9e,stroke-width:2px
style D stroke:#ff9f43
classDef green fill:#e6f7e6,stroke:#28cc9e
classDef yellow fill:#fff8e6,stroke:#ff9f43
class B,D green,yellow&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</code></pre>
<h4 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p><strong>1. Composition Forces Safe Mode</strong> (Overrides all rules)</p>
<pre><code class="typescript"><span class="hl-0">// All rules will use safe mode regardless of their own config</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">pipeline</span><span class="hl-2"> = </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">unsafeRule</span><span class="hl-2">,                </span><span class="hl-0">// Will be forced to safe mode</span><br/><span class="hl-2">  </span><span class="hl-4">withSafeError</span><span class="hl-2">(</span><span class="hl-5">rule</span><span class="hl-2">, {      </span><span class="hl-0">// Configuration ignored</span><br/><span class="hl-2">    </span><span class="hl-5">errorHandlingMode:</span><span class="hl-2"> </span><span class="hl-6">&#39;unsafe&#39;</span><span class="hl-2"> </span><br/><span class="hl-2">  })</span><br/><span class="hl-2">], {</span><br/><span class="hl-2">  </span><span class="hl-5">errorHandlingMode:</span><span class="hl-2"> </span><span class="hl-6">&#39;safe&#39;</span><span class="hl-2">  </span><span class="hl-0">// ‚Üê Takes precedence</span><br/><span class="hl-2">})</span>
</code><button type="button">Copy</button></pre>

<p><strong>2. Unsafe Composition with Mixed Rules</strong></p>
<pre><code class="typescript"><span class="hl-0">// Rules can specify their own mode since composition allows it</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">pipeline</span><span class="hl-2"> = </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">unsafeRule</span><span class="hl-2">,                </span><span class="hl-0">// Runs in unsafe mode</span><br/><span class="hl-2">  </span><span class="hl-4">withSafeError</span><span class="hl-2">(</span><span class="hl-5">rule</span><span class="hl-2">, {      </span><span class="hl-0">// Runs in safe mode</span><br/><span class="hl-2">    </span><span class="hl-5">errorHandlingMode:</span><span class="hl-2"> </span><span class="hl-6">&#39;safe&#39;</span><span class="hl-2"> </span><br/><span class="hl-2">  })</span><br/><span class="hl-2">], {</span><br/><span class="hl-2">  </span><span class="hl-5">errorHandlingMode:</span><span class="hl-2"> </span><span class="hl-6">&#39;unsafe&#39;</span><span class="hl-2"> </span><span class="hl-0">// ‚Üê Allows rule-level configs</span><br/><span class="hl-2">})</span>
</code><button type="button">Copy</button></pre>

<h2 id="context-cloning-options" class="tsd-anchor-link">Context Cloning Options<a href="#context-cloning-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The library provides flexible context cloning strategies to balance between performance and correctness. You can control cloning behavior through <code>CompositionOptions</code>:</p>
<pre><code class="typescript"><span class="hl-1">interface</span><span class="hl-2"> </span><span class="hl-9">CompositionOptions</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">cloneContext</span><span class="hl-2">?: </span><span class="hl-9">boolean</span><span class="hl-2">;      </span><span class="hl-0">// Enable/disable cloning</span><br/><span class="hl-2">  </span><span class="hl-5">shallowClone</span><span class="hl-2">?: </span><span class="hl-9">boolean</span><span class="hl-2">;      </span><span class="hl-0">// Use shallow clone when true</span><br/><span class="hl-2">  </span><span class="hl-5">structuredClone</span><span class="hl-2">?: </span><span class="hl-9">boolean</span><span class="hl-2">;   </span><span class="hl-0">// Force structuredClone when true</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="cloning-strategies" class="tsd-anchor-link">Cloning Strategies<a href="#cloning-strategies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The library automatically selects the best available cloning method based on your options and runtime environment:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Priority</th>
<th>Speed</th>
<th>Depth</th>
<th>Special Types*</th>
<th>Circular Refs</th>
<th>Node.js</th>
<th>Browser</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>shallowClone</code></td>
<td>1st</td>
<td>üöÄ Fast</td>
<td>Shallow</td>
<td>‚ùå No</td>
<td>‚úÖ Yes</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td><code>structuredClone</code></td>
<td>2nd</td>
<td>üê¢ Slow</td>
<td>Deep</td>
<td>‚úÖ Yes</td>
<td>‚úÖ Yes</td>
<td>17+</td>
<td>Modern</td>
</tr>
<tr>
<td>JSON Clone</td>
<td>Fallback</td>
<td>üèé Fast</td>
<td>Deep</td>
<td>‚ùå No</td>
<td>‚ùå No</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
</tbody>
</table>
<p>*Special Types: Date, Map, Set, RegExp, etc.</p>
<h3 id="usage-examples-1" class="tsd-anchor-link">Usage Examples<a href="#usage-examples-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>1. Default Behavior (Smart Auto-Detect)</strong></p>
<pre><code class="typescript"><span class="hl-0">// Automatically uses the best available clone method</span><br/><span class="hl-4">pipeRules</span><span class="hl-2">(</span><span class="hl-5">rules</span><span class="hl-2">, { </span><span class="hl-5">cloneContext:</span><span class="hl-2"> </span><span class="hl-1">true</span><span class="hl-2"> })</span>
</code><button type="button">Copy</button></pre>

<p><strong>2. Force Shallow Clone</strong></p>
<pre><code class="typescript"><span class="hl-0">// Fastest option - only clones top-level properties</span><br/><span class="hl-4">pipeRules</span><span class="hl-2">(</span><span class="hl-5">rules</span><span class="hl-2">, { </span><span class="hl-5">cloneContext:</span><span class="hl-2"> </span><span class="hl-1">true</span><span class="hl-2">, </span><span class="hl-5">shallowClone:</span><span class="hl-2"> </span><span class="hl-1">true</span><span class="hl-2"> })</span>
</code><button type="button">Copy</button></pre>

<p><strong>3. Force Structured Clone</strong></p>
<pre><code class="typescript"><span class="hl-0">// Most accurate - preserves special object types</span><br/><span class="hl-4">pipeRules</span><span class="hl-2">(</span><span class="hl-5">rules</span><span class="hl-2">, { </span><span class="hl-5">cloneContext:</span><span class="hl-2"> </span><span class="hl-1">true</span><span class="hl-2">, </span><span class="hl-5">structuredClone:</span><span class="hl-2"> </span><span class="hl-1">true</span><span class="hl-2"> })</span><br/><span class="hl-0">// Falls back to JSON clone if structuredClone isn&#39;t available</span>
</code><button type="button">Copy</button></pre>

<h2 id="best-practices-1" class="tsd-anchor-link">Best Practices<a href="#best-practices-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li><strong>Small Rules</strong> - Keep each rule focused</li>
<li><strong>Pure Functions</strong> - Avoid side effects in rules</li>
<li><strong>Memoize</strong> - Cache expensive validations</li>
<li><strong>Type Narrowing</strong> - Use <code>requireContextRule</code> for safety</li>
<li><strong>Instrument</strong> - Add metrics in production</li>
</ol>
<h2 id="üîç-comparison-to-other-libraries" class="tsd-anchor-link">üîç Comparison to Other Libraries<a href="#üîç-comparison-to-other-libraries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>While many libraries focus on schema validation or static rules, <code>ts-rules-composer</code> is designed specifically for <strong>composable business logic</strong>, dynamic workflows, and contextual validation pipelines.</p>
<p>Here‚Äôs how it compares to popular alternatives:</p>
<table>
<thead>
<tr>
<th>Library</th>
<th>Type</th>
<th>Async</th>
<th>Context-Aware</th>
<th>Type Inference</th>
<th>Size (gzipped)</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>ts-rules-composer</code></strong></td>
<td>Rule engine, functional</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>~4KB</td>
<td>Built for composing complex, contextual rules</td>
</tr>
<tr>
<td><a href="https://github.com/colinhacks/zod"><code>zod</code></a></td>
<td>Schema validation</td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>‚úÖ</td>
<td>~40KB</td>
<td>Excellent for static object validation</td>
</tr>
<tr>
<td><a href="https://github.com/gcanti/io-ts"><code>io-ts</code></a></td>
<td>Runtime type validation</td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>‚úÖ</td>
<td>~5KB+</td>
<td>Powerful but requires deep functional patterns</td>
</tr>
<tr>
<td><a href="https://github.com/CacheControl/json-rules-engine"><code>json-rules-engine</code></a></td>
<td>Declarative JSON rules</td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>‚ùå</td>
<td>~25KB</td>
<td>Config-based rules, limited type safety</td>
</tr>
<tr>
<td><a href="https://casl.js.org/"><code>casl</code></a></td>
<td>Authorization DSL</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚ö†Ô∏è Limited</td>
<td>~6KB</td>
<td>Great for access control, not general validation</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="üß†-when-to-use-ts-rules-composer" class="tsd-anchor-link">üß† When to Use <code>ts-rules-composer</code><a href="#üß†-when-to-use-ts-rules-composer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Choose <code>ts-rules-composer</code> when your validation or rule logic:</p>
<ul>
<li>Involves <strong>multiple branching paths</strong>, retries, timeouts, or side effects</li>
<li>Requires <strong>shared context</strong> (e.g. user metadata, database, external services)</li>
<li>Needs <strong>clean separation</strong> of rule logic and pipeline composition</li>
<li>Must run in both <strong>Node.js or the browser</strong></li>
<li>Should remain <strong>type-safe</strong> and <strong>composable</strong></li>
</ul>
<p>This library is not meant to replace schema validators like <code>zod</code>, but to complement them ‚Äî it's ideal when your business logic <strong>cannot be expressed declaratively</strong> or <strong>requires orchestration</strong> of multiple validation steps.</p>
<h2 id="api-reference" class="tsd-anchor-link">API Reference<a href="#api-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="core-functions" class="tsd-anchor-link">Core Functions<a href="#core-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="piperulesrules-options" class="tsd-anchor-link"><code>pipeRules(rules, options?)</code><a href="#piperulesrules-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Sequentially executes rules left-to-right (fails fast)</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateUser</span><span class="hl-2"> = </span><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">validateEmailFormat</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">checkEmailUnique</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validatePassword</span><br/><span class="hl-2">], { </span><span class="hl-5">cloneContext:</span><span class="hl-2"> </span><span class="hl-1">true</span><span class="hl-2"> })</span>
</code><button type="button">Copy</button></pre>

<h4 id="composerulesrules-options" class="tsd-anchor-link"><code>composeRules(rules, options?)</code><a href="#composerulesrules-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Sequentially executes rules right-to-left (fails fast)</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">processInput</span><span class="hl-2"> = </span><span class="hl-4">composeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">normalizeData</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateInput</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">sanitizeInput</span><br/><span class="hl-2">])</span>
</code><button type="button">Copy</button></pre>

<h4 id="everyrules-options" class="tsd-anchor-link"><code>every(rules, options?)</code><a href="#everyrules-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Runs rules in parallel (collects all errors)</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateProfile</span><span class="hl-2"> = </span><span class="hl-4">every</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-5">validateAvatar</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateBio</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateLinks</span><br/><span class="hl-2">])</span>
</code><button type="button">Copy</button></pre>

<h3 id="control-flow" class="tsd-anchor-link">Control Flow<a href="#control-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="matchaccessor-cases-defaultcase-options" class="tsd-anchor-link"><code>match(accessor, cases, defaultCase?, options?)</code><a href="#matchaccessor-cases-defaultcase-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Pattern matching routing</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validatePayment</span><span class="hl-2"> = </span><span class="hl-4">match</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">order</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">order</span><span class="hl-2">.</span><span class="hl-5">payment</span><span class="hl-2">.</span><span class="hl-5">type</span><span class="hl-2">,</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-5">credit:</span><span class="hl-2"> </span><span class="hl-5">validateCreditCard</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-5">paypal:</span><span class="hl-2"> </span><span class="hl-5">validatePaypal</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-5">crypto:</span><span class="hl-2"> </span><span class="hl-5">validateCrypto</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;Unsupported payment method&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="whencondition-rule-options" class="tsd-anchor-link"><code>when(condition, rule, options?)</code><a href="#whencondition-rule-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Executes only if condition is true</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateAdmin</span><span class="hl-2"> = </span><span class="hl-4">when</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">user</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">user</span><span class="hl-2">.</span><span class="hl-5">role</span><span class="hl-2"> === </span><span class="hl-6">&quot;admin&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">checkAdminPrivileges</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="unlesscondition-rule-options" class="tsd-anchor-link"><code>unless(condition, rule, options?)</code><a href="#unlesscondition-rule-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Executes only if condition is false</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateGuest</span><span class="hl-2"> = </span><span class="hl-4">unless</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">user</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">user</span><span class="hl-2">.</span><span class="hl-5">isVerified</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">requireVerification</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="ifelsecondition-ifrule-elserule-options" class="tsd-anchor-link"><code>ifElse(condition, ifRule, elseRule?, options?)</code><a href="#ifelsecondition-ifrule-elserule-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Branch between two rules</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateAge</span><span class="hl-2"> = </span><span class="hl-4">ifElse</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">user</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">user</span><span class="hl-2">.</span><span class="hl-5">age</span><span class="hl-2"> &gt;= </span><span class="hl-7">18</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateAdult</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateMinor</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="oneofrules-options" class="tsd-anchor-link"><code>oneOf(rules, options?)</code><a href="#oneofrules-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Tries rules until one passes</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateContact</span><span class="hl-2"> = </span><span class="hl-4">oneOf</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">validateEmail</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validatePhone</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateUsername</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="withfallbackmainrule-fallbackrule-options" class="tsd-anchor-link"><code>withFallback(mainRule, fallbackRule, options?)</code><a href="#withfallbackmainrule-fallbackrule-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Fallback when main rule fails</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateWithFallback</span><span class="hl-2"> = </span><span class="hl-4">withFallback</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">primaryValidation</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">backupValidation</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h3 id="error-handling" class="tsd-anchor-link">Error Handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="maperrorrule-transform-options" class="tsd-anchor-link"><code>mapError(rule, transform, options?)</code><a href="#maperrorrule-transform-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Transforms error output</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">friendlyErrors</span><span class="hl-2"> = </span><span class="hl-4">mapError</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">validatePassword</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">err</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-6">`Security error: </span><span class="hl-1">${</span><span class="hl-5">err</span><span class="hl-1">}</span><span class="hl-6">`</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="notrule-error-options" class="tsd-anchor-link"><code>not(rule, error, options?)</code><a href="#notrule-error-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Inverts rule logic</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">isNotBanned</span><span class="hl-2"> = </span><span class="hl-4">not</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">checkBanStatus</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-6">&quot;Account must be active&quot;</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="withsafeerrorrule-errortransform" class="tsd-anchor-link"><code>withSafeError(rule, errorTransform?)</code><a href="#withsafeerrorrule-errortransform" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Wraps a rule to catch errors and convert them to failed RuleResults</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">customSafeRule</span><span class="hl-2"> = </span><span class="hl-4">withSafeError</span><span class="hl-2">(</span><span class="hl-5">riskyRule</span><span class="hl-2">, </span><span class="hl-5">e</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> ({</span><br/><span class="hl-2">  </span><span class="hl-5">code:</span><span class="hl-2"> </span><span class="hl-7">500</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">message:</span><span class="hl-2"> </span><span class="hl-4">String</span><span class="hl-2">(</span><span class="hl-5">e</span><span class="hl-2">)</span><br/><span class="hl-2">}));</span>
</code><button type="button">Copy</button></pre>

<h4 id="withsafepredicaterule-errortransform" class="tsd-anchor-link"><code>withSafePredicate(rule, errorTransform?)</code><a href="#withsafepredicaterule-errortransform" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Wraps a predicate function with error handling and type safety</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">safePredicate</span><span class="hl-2"> = </span><span class="hl-4">withSafePredicate</span><span class="hl-2">(</span><br/><span class="hl-2">  (</span><span class="hl-5">input</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">input</span><span class="hl-2">.</span><span class="hl-5">length</span><span class="hl-2"> &gt; </span><span class="hl-7">5</span><span class="hl-2">,</span><br/><span class="hl-2">  (</span><span class="hl-5">err</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-6">`Predicate failed: </span><span class="hl-1">${</span><span class="hl-4">String</span><span class="hl-10">(</span><span class="hl-5">err</span><span class="hl-10">)</span><span class="hl-1">}</span><span class="hl-6">`</span><br/><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="performance" class="tsd-anchor-link">Performance<a href="#performance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="withmemoizerule-keyfn-options" class="tsd-anchor-link"><code>withMemoize(rule, keyFn, options?)</code><a href="#withmemoizerule-keyfn-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Caches rule results</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">cachedCheck</span><span class="hl-2"> = </span><span class="hl-4">withMemoize</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">dbUserLookup</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">user</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">user</span><span class="hl-2">.</span><span class="hl-5">id</span><span class="hl-2">,</span><br/><span class="hl-2">  { </span><span class="hl-5">ttl:</span><span class="hl-2"> </span><span class="hl-7">30000</span><span class="hl-2">, </span><span class="hl-5">maxSize:</span><span class="hl-2"> </span><span class="hl-7">100</span><span class="hl-2"> }</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="withtimeoutrule-ms-timeouterror-options" class="tsd-anchor-link"><code>withTimeout(rule, ms, timeoutError, options?)</code><a href="#withtimeoutrule-ms-timeouterror-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Adds execution timeout</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">timeboundRule</span><span class="hl-2"> = </span><span class="hl-4">withTimeout</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">apiCheck</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-7">3000</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-6">&quot;Request timed out&quot;</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="withretryrule-options" class="tsd-anchor-link"><code>withRetry(rule, options)</code><a href="#withretryrule-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Automatic retries on failure</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">resilientRule</span><span class="hl-2"> = </span><span class="hl-4">withRetry</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">flakyServiceCheck</span><span class="hl-2">,</span><br/><span class="hl-2">  { </span><span class="hl-5">attempts:</span><span class="hl-2"> </span><span class="hl-7">3</span><span class="hl-2">, </span><span class="hl-5">delayMs:</span><span class="hl-2"> </span><span class="hl-7">1000</span><span class="hl-2"> }</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h3 id="context-management" class="tsd-anchor-link">Context Management<a href="#context-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="requirecontextruleerror-rule-typeguard" class="tsd-anchor-link"><code>requireContextRule(error, rule, typeGuard?)</code><a href="#requirecontextruleerror-rule-typeguard" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Enforces context requirements</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">authRule</span><span class="hl-2"> = </span><span class="hl-4">requireContextRule</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-6">&quot;Authentication required&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">  (</span><span class="hl-5">input</span><span class="hl-2">, </span><span class="hl-5">ctx</span><span class="hl-2">: </span><span class="hl-9">AuthContext</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-4">checkPermissions</span><span class="hl-2">(</span><span class="hl-5">ctx</span><span class="hl-2">.</span><span class="hl-5">token</span><span class="hl-2">),</span><br/><span class="hl-2">  (</span><span class="hl-5">ctx</span><span class="hl-2">): </span><span class="hl-5">ctx</span><span class="hl-2"> </span><span class="hl-1">is</span><span class="hl-2"> </span><span class="hl-9">AuthContext</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> !!</span><span class="hl-5">ctx</span><span class="hl-2">?.</span><span class="hl-5">token</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="withlazycontextloader-rule-options" class="tsd-anchor-link"><code>withLazyContext(loader, rule, options?)</code><a href="#withlazycontextloader-rule-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Lazy-loads context</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">profileRule</span><span class="hl-2"> = </span><span class="hl-4">withLazyContext</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">userId</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-4">fetchProfile</span><span class="hl-2">(</span><span class="hl-5">userId</span><span class="hl-2">),</span><br/><span class="hl-2">  </span><span class="hl-5">validateProfile</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="hascontextctx" class="tsd-anchor-link"><code>hasContext(ctx)</code><a href="#hascontextctx" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Type guard for context</p>
<pre><code class="typescript"><span class="hl-8">if</span><span class="hl-2"> (</span><span class="hl-4">hasContext</span><span class="hl-2">&lt;</span><span class="hl-9">AuthContext</span><span class="hl-2">&gt;(</span><span class="hl-5">context</span><span class="hl-2">)) {</span><br/><span class="hl-2">  </span><span class="hl-0">// context is now typed as AuthContext</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="instrumentation" class="tsd-anchor-link">Instrumentation<a href="#instrumentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="withdebugrule-options" class="tsd-anchor-link"><code>withDebug(rule, options)</code><a href="#withdebugrule-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Adds debug logging</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">debugRule</span><span class="hl-2"> = </span><span class="hl-4">withDebug</span><span class="hl-2">(</span><span class="hl-5">validateOrder</span><span class="hl-2">, {</span><br/><span class="hl-2">  </span><span class="hl-5">name:</span><span class="hl-2"> </span><span class="hl-6">&quot;OrderValidation&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-4">onEnd</span><span class="hl-5">:</span><span class="hl-2"> (</span><span class="hl-5">input</span><span class="hl-2">, </span><span class="hl-5">result</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-4">log</span><span class="hl-2">(</span><span class="hl-5">result</span><span class="hl-2">)</span><br/><span class="hl-2">})</span>
</code><button type="button">Copy</button></pre>

<h4 id="tapeffect-options" class="tsd-anchor-link"><code>tap(effect, options?)</code><a href="#tapeffect-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Creates a standalone tap effect for use in composition pipelines</p>
<pre><code class="typescript"><span class="hl-4">pipeRules</span><span class="hl-2">([</span><br/><span class="hl-2">  </span><span class="hl-4">tap</span><span class="hl-2">((</span><span class="hl-5">input</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">console</span><span class="hl-2">.</span><span class="hl-4">log</span><span class="hl-2">(</span><span class="hl-6">&#39;Processing: &#39;</span><span class="hl-2">, </span><span class="hl-5">input</span><span class="hl-2">)),</span><br/><span class="hl-2">  </span><span class="hl-5">validateInput</span><br/><span class="hl-2">])</span>
</code><button type="button">Copy</button></pre>

<h4 id="withtapeffect-options" class="tsd-anchor-link"><code>withTap(effect, options?)</code><a href="#withtapeffect-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Wraps a rule with side effects without modifying its result</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">loggedRule</span><span class="hl-2"> = </span><span class="hl-4">withTap</span><span class="hl-2">((</span><span class="hl-5">input</span><span class="hl-2">, </span><span class="hl-5">result</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">analytics</span><span class="hl-2">.</span><span class="hl-4">trackValidation</span><span class="hl-2">(</span><span class="hl-5">input</span><span class="hl-2">, </span><span class="hl-5">result</span><span class="hl-2">)</span><br/><span class="hl-2">})</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">ruleResult</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-4">loggedRule</span><span class="hl-2">(</span><span class="hl-5">input</span><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h3 id="utilities" class="tsd-anchor-link">Utilities<a href="#utilities" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="pass" class="tsd-anchor-link"><code>pass()</code><a href="#pass" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Creates success result</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">success</span><span class="hl-2"> = </span><span class="hl-4">pass</span><span class="hl-2">()</span>
</code><button type="button">Copy</button></pre>

<h4 id="failerror" class="tsd-anchor-link"><code>fail(error)</code><a href="#failerror" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Creates failure result</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">failure</span><span class="hl-2"> = </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;Invalid input&quot;</span><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="getruleerrorresult" class="tsd-anchor-link"><code>getRuleError(result)</code><a href="#getruleerrorresult" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Extracts error from failed result</p>
<pre><code class="typescript"><span class="hl-8">if</span><span class="hl-2"> (</span><span class="hl-5">result</span><span class="hl-2">.</span><span class="hl-5">status</span><span class="hl-2"> === </span><span class="hl-6">&quot;failed&quot;</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">error</span><span class="hl-2"> = </span><span class="hl-4">getRuleError</span><span class="hl-2">(</span><span class="hl-5">result</span><span class="hl-2">)</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<h4 id="validatefieldgetter-rule-defaultvalue" class="tsd-anchor-link"><code>validateField(getter, rule, defaultValue?)</code><a href="#validatefieldgetter-rule-defaultvalue" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Validates object fields</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">validateEmail</span><span class="hl-2"> = </span><span class="hl-4">validateField</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-5">user</span><span class="hl-2"> </span><span class="hl-1">=&gt;</span><span class="hl-2"> </span><span class="hl-5">user</span><span class="hl-2">.</span><span class="hl-5">email</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-5">validateEmailFormat</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h4 id="injectdependency-rulefactory" class="tsd-anchor-link"><code>inject(dependency, ruleFactory)</code><a href="#injectdependency-rulefactory" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Dependency injection</p>
<pre><code class="typescript"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-4">createDbRule</span><span class="hl-2"> = (</span><span class="hl-5">db</span><span class="hl-2">: </span><span class="hl-9">Database</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><span class="hl-2"> (</span><span class="hl-5">input</span><span class="hl-2">: </span><span class="hl-9">string</span><span class="hl-2">) </span><span class="hl-1">=&gt;</span><br/><span class="hl-2">  </span><span class="hl-5">db</span><span class="hl-2">.</span><span class="hl-4">exists</span><span class="hl-2">(</span><span class="hl-5">input</span><span class="hl-2">) ? </span><span class="hl-4">pass</span><span class="hl-2">() : </span><span class="hl-4">fail</span><span class="hl-2">(</span><span class="hl-6">&quot;Not found&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">dbRule</span><span class="hl-2"> = </span><span class="hl-4">inject</span><span class="hl-2">(</span><span class="hl-5">database</span><span class="hl-2">, </span><span class="hl-5">createDbRule</span><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<h3 id="core-functions-1" class="tsd-anchor-link">Core Functions<a href="#core-functions-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pipeRules</code></td>
<td>Sequential validation left-right (fail-fast)</td>
<td><code>pipeRules([checkA, checkB])</code></td>
</tr>
<tr>
<td><code>composeRules</code></td>
<td>Sequential validation right-left (fail-fast)</td>
<td><code>composeRules([checkA, checkB])</code></td>
</tr>
<tr>
<td><code>every</code></td>
<td>Parallel validation (collect all errors)</td>
<td><code>every([checkX, checkY])</code></td>
</tr>
<tr>
<td><code>match</code></td>
<td>Pattern matching routing</td>
<td><code>match(getUserType, { admin: ruleA, user: ruleB })</code></td>
</tr>
<tr>
<td><code>ifElse</code></td>
<td>Conditional routing</td>
<td><code>ifElse(isUnderAge, validateMinorAccount, validateAdultAccount)</code></td>
</tr>
</tbody>
</table>
<h3 id="combinators" class="tsd-anchor-link">Combinators<a href="#combinators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Combinator</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>when</code></td>
<td>Conditional execution</td>
<td><code>when(isAdmin, validateAdmin)</code></td>
</tr>
<tr>
<td><code>unless</code></td>
<td>Negative condition</td>
<td><code>unless(isGuest, validateAccount)</code></td>
</tr>
<tr>
<td><code>not</code></td>
<td>Invert rule logic</td>
<td><code>not(isBanned, &quot;Must not be banned&quot;)</code></td>
</tr>
<tr>
<td><code>oneOf</code></td>
<td>First-successful validation</td>
<td><code>oneOf(validateV1, validateV2)</code></td>
</tr>
<tr>
<td><code>withFallback</code></td>
<td>Fallback rule</td>
<td><code>withFallback(primary, backup)</code></td>
</tr>
</tbody>
</table>
<h3 id="performance-1" class="tsd-anchor-link">Performance<a href="#performance-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Utility</th>
<th>Use Case</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>withMemoize</code></td>
<td>Cache results</td>
<td><code>withMemoize(expensiveCheck, { ttl: 30000 })</code></td>
</tr>
<tr>
<td><code>withTimeout</code></td>
<td>Add time limit</td>
<td><code>withTimeout(networkCall, 3000, &quot;Timeout&quot;)</code></td>
</tr>
<tr>
<td><code>withRetry</code></td>
<td>Automatic retries</td>
<td><code>withRetry(unstableAPI, { attempts: 3 })</code></td>
</tr>
</tbody>
</table>
<h3 id="instrumentation-1" class="tsd-anchor-link">Instrumentation<a href="#instrumentation-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Tool</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>withDebug</code></td>
<td>Debug logging</td>
<td><code>withDebug(rule, { name: &quot;Validation&quot; })</code></td>
</tr>
<tr>
<td><code>tap</code></td>
<td>Side effects</td>
<td><code>tap((input, result) =&gt; log(result))</code></td>
</tr>
</tbody>
</table>
<h2 id="contributing" class="tsd-anchor-link">Contributing<a href="#contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li>Fork the repository</li>
<li>Create a feature branch (<code>git checkout -b feat/amazing-feature</code>)</li>
<li>Commit changes (<code>git commit -m 'Add amazing feature'</code>)</li>
<li>Push to branch (<code>git push origin feat/amazing-feature</code>)</li>
<li>Open a Pull Request</li>
</ol>
<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT ¬© Breno Magalh√£es<br>
<strong>Like this project?</strong> ‚≠êÔ∏è <a href="https://github.com/Brenopms/ts-rules-composer">Star it on GitHub</a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#ts-rules-composer-üéº"><span>TS <wbr/>Rules <wbr/>Composer üéº</span></a><ul><li><a href="#features-‚ú®"><span>Features ‚ú®</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#core-concepts"><span>Core <wbr/>Concepts</span></a></li><li><ul><li><a href="#‚öõÔ∏è-the-atomic-validation-unit"><span>‚öõÔ∏è <wbr/>The <wbr/>Atomic <wbr/>Validation <wbr/>Unit</span></a></li><li><ul><li><a href="#üß©-rule-signature"><span>üß© <wbr/>Rule <wbr/>Signature</span></a></li><li><a href="#üß™-rule-result"><span>üß™ <wbr/>Rule <wbr/>Result</span></a></li><li><a href="#üß†-context-example"><span>üß† <wbr/>Context <wbr/>Example</span></a></li><li><a href="#üîó-composing-rules"><span>üîó <wbr/>Composing <wbr/>Rules</span></a></li><li><a href="#üß∞-summary"><span>üß∞ <wbr/>Summary</span></a></li></ul></li></ul></li><li><a href="#usage-examples"><span>Usage <wbr/>Examples</span></a></li><li><ul><li><a href="#example-1-financial-transaction-validation"><span>Example 1: <wbr/>Financial <wbr/>Transaction <wbr/>Validation</span></a></li><li><a href="#example-2-user-registration"><span>Example 2: <wbr/>User <wbr/>Registration</span></a></li><li><a href="#example-3-healthcare-appointment-system"><span>Example 3: <wbr/>Healthcare <wbr/>Appointment <wbr/>System</span></a></li><li><a href="#example-4-content-moderation-system"><span>Example 4: <wbr/>Content <wbr/>Moderation <wbr/>System</span></a></li></ul></li><li><a href="#error-handling-standardization"><span>Error <wbr/>Handling <wbr/>Standardization</span></a></li><li><ul><li><a href="#core-principles"><span>Core <wbr/>Principles</span></a></li><li><a href="#standardization-functions"><span>Standardization <wbr/>Functions</span></a></li><li><a href="#error-handling-modes"><span>Error <wbr/>Handling <wbr/>Modes</span></a></li><li><a href="#error-flow"><span>Error <wbr/>Flow</span></a></li><li><a href="#best-practices"><span>Best <wbr/>Practices</span></a></li><li><a href="#debugging-tips"><span>Debugging <wbr/>Tips</span></a></li><li><a href="#error-handling-precedence-rules"><span>Error <wbr/>Handling <wbr/>Precedence <wbr/>Rules</span></a></li><li><ul><li><a href="#hierarchy-of-control"><span>Hierarchy of <wbr/>Control</span></a></li><li><a href="#behavior-matrix"><span>Behavior <wbr/>Matrix</span></a></li><li><a href="#complete-error-flow"><span>Complete <wbr/>Error <wbr/>Flow</span></a></li><li><a href="#examples"><span>Examples</span></a></li></ul></li></ul></li><li><a href="#context-cloning-options"><span>Context <wbr/>Cloning <wbr/>Options</span></a></li><li><ul><li><a href="#cloning-strategies"><span>Cloning <wbr/>Strategies</span></a></li><li><a href="#usage-examples-1"><span>Usage <wbr/>Examples</span></a></li></ul></li><li><a href="#best-practices-1"><span>Best <wbr/>Practices</span></a></li><li><a href="#üîç-comparison-to-other-libraries"><span>üîç <wbr/>Comparison to <wbr/>Other <wbr/>Libraries</span></a></li><li><ul><li><a href="#üß†-when-to-use-ts-rules-composer"><span>üß† <wbr/>When to <wbr/>Use ts-<wbr/>rules-<wbr/>composer</span></a></li></ul></li><li><a href="#api-reference"><span>API <wbr/>Reference</span></a></li><li><ul><li><a href="#core-functions"><span>Core <wbr/>Functions</span></a></li><li><ul><li><a href="#piperulesrules-options"><span>pipe<wbr/>Rules(rules, options?)</span></a></li><li><a href="#composerulesrules-options"><span>compose<wbr/>Rules(rules, options?)</span></a></li><li><a href="#everyrules-options"><span>every(rules, options?)</span></a></li></ul></li><li><a href="#control-flow"><span>Control <wbr/>Flow</span></a></li><li><ul><li><a href="#matchaccessor-cases-defaultcase-options"><span>match(accessor, cases, default<wbr/>Case?, options?)</span></a></li><li><a href="#whencondition-rule-options"><span>when(condition, rule, options?)</span></a></li><li><a href="#unlesscondition-rule-options"><span>unless(condition, rule, options?)</span></a></li><li><a href="#ifelsecondition-ifrule-elserule-options"><span>if<wbr/>Else(condition, if<wbr/>Rule, else<wbr/>Rule?, options?)</span></a></li><li><a href="#oneofrules-options"><span>one<wbr/>Of(rules, options?)</span></a></li><li><a href="#withfallbackmainrule-fallbackrule-options"><span>with<wbr/>Fallback(main<wbr/>Rule, fallback<wbr/>Rule, options?)</span></a></li></ul></li><li><a href="#error-handling"><span>Error <wbr/>Handling</span></a></li><li><ul><li><a href="#maperrorrule-transform-options"><span>map<wbr/>Error(rule, transform, options?)</span></a></li><li><a href="#notrule-error-options"><span>not(rule, error, options?)</span></a></li><li><a href="#withsafeerrorrule-errortransform"><span>with<wbr/>Safe<wbr/>Error(rule, error<wbr/>Transform?)</span></a></li><li><a href="#withsafepredicaterule-errortransform"><span>with<wbr/>Safe<wbr/>Predicate(rule, error<wbr/>Transform?)</span></a></li></ul></li><li><a href="#performance"><span>Performance</span></a></li><li><ul><li><a href="#withmemoizerule-keyfn-options"><span>with<wbr/>Memoize(rule, key<wbr/>Fn, options?)</span></a></li><li><a href="#withtimeoutrule-ms-timeouterror-options"><span>with<wbr/>Timeout(rule, ms, timeout<wbr/>Error, options?)</span></a></li><li><a href="#withretryrule-options"><span>with<wbr/>Retry(rule, options)</span></a></li></ul></li><li><a href="#context-management"><span>Context <wbr/>Management</span></a></li><li><ul><li><a href="#requirecontextruleerror-rule-typeguard"><span>require<wbr/>Context<wbr/>Rule(error, rule, type<wbr/>Guard?)</span></a></li><li><a href="#withlazycontextloader-rule-options"><span>with<wbr/>Lazy<wbr/>Context(loader, rule, options?)</span></a></li><li><a href="#hascontextctx"><span>has<wbr/>Context(ctx)</span></a></li></ul></li><li><a href="#instrumentation"><span>Instrumentation</span></a></li><li><ul><li><a href="#withdebugrule-options"><span>with<wbr/>Debug(rule, options)</span></a></li><li><a href="#tapeffect-options"><span>tap(effect, options?)</span></a></li><li><a href="#withtapeffect-options"><span>with<wbr/>Tap(effect, options?)</span></a></li></ul></li><li><a href="#utilities"><span>Utilities</span></a></li><li><ul><li><a href="#pass"><span>pass()</span></a></li><li><a href="#failerror"><span>fail(error)</span></a></li><li><a href="#getruleerrorresult"><span>get<wbr/>Rule<wbr/>Error(result)</span></a></li><li><a href="#validatefieldgetter-rule-defaultvalue"><span>validate<wbr/>Field(getter, rule, default<wbr/>Value?)</span></a></li><li><a href="#injectdependency-rulefactory"><span>inject(dependency, rule<wbr/>Factory)</span></a></li></ul></li><li><a href="#core-functions-1"><span>Core <wbr/>Functions</span></a></li><li><a href="#combinators"><span>Combinators</span></a></li><li><a href="#performance-1"><span>Performance</span></a></li><li><a href="#instrumentation-1"><span>Instrumentation</span></a></li></ul></li><li><a href="#contributing"><span>Contributing</span></a></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">ts-rules-composer - v0.0.1</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with <a href="https://github.com/JulianWowra/typedoc-github-theme" target="_blank">typedoc-github-theme</a></p></footer><div class="overlay"></div>
<script type="module">
import mermaid from "https://unpkg.com/mermaid@latest/dist/mermaid.esm.min.mjs";

document.documentElement.classList.add("mermaid-enabled");

mermaid.initialize({startOnLoad:true});

requestAnimationFrame(function check() {
  let some = false;
  document.querySelectorAll("div.mermaid:not([data-inserted])").forEach(div => {
    some = true;
    if (div.querySelector("svg")) {
      div.dataset.inserted = true;
    }
  });

  if (some) {
    requestAnimationFrame(check);
  }
});
</script>
</body></html>
